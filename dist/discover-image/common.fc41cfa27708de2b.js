"use strict";(self.webpackChunkdiscover_image=self.webpackChunkdiscover_image||[]).push([[592],{3482:(x,E,c)=>{c.d(E,{G:()=>p});var d=c(5e3),f=c(4100),v=c(4594),u=c(6392);let p=(()=>{class s{constructor(l){this.router=l}ngOnInit(){}goHome(){this.router.navigate([""])}}return s.\u0275fac=function(l){return new(l||s)(d.Y36(f.F0))},s.\u0275cmp=d.Xpm({type:s,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"header-row"],["src","../../assets/logo.svg","alt","Discover Image",1,"logo",3,"click"],[1,"w-100"]],template:function(l,M){1&l&&(d.TgZ(0,"mat-toolbar")(1,"mat-toolbar-row",0)(2,"img",1),d.NdJ("click",function(){return M.goHome()}),d.qZA(),d._UZ(3,"app-search",2),d.qZA()())},directives:[v.Ye,v.rD,u.g],styles:[".logo[_ngcontent-%COMP%]{width:250px;margin-right:40px;cursor:pointer}.header-row[_ngcontent-%COMP%]{height:120px}"]}),s})()},7783:(x,E,c)=>{c.d(E,{v:()=>z});var d=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],f=t=>{let e=0;for(let a=0;a<t.length;a++)e=83*e+d.indexOf(t[a]);return e},u=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},p=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(12.92*e*255+.5):Math.trunc(255*(1.055*Math.pow(e,.4166666666666667)-.055)+.5)},n=(t,e)=>(t=>t<0?-1:1)(t)*Math.pow(Math.abs(t),e),l=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},W=t=>{let a=t>>8&255,o=255&t;return[u(t>>16),u(a),u(o)]},F=(t,e)=>{let a=Math.floor(t/361),o=Math.floor(t/19)%19,h=t%19;return[n((a-9)/9,2)*e,n((o-9)/9,2)*e,n((h-9)/9,2)*e]},K=(t,e,a,o)=>{(t=>{if(!t||t.length<6)throw new l("The blurhash string must be at least 6 characters");let e=f(t[0]),a=Math.floor(e/9)+1,o=e%9+1;if(t.length!==4+2*o*a)throw new l(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*o*a}`)})(t),o|=1;let h=f(t[0]),C=Math.floor(h/9)+1,P=h%9+1,B=(f(t[1])+1)/166,g=new Array(P*C);for(let r=0;r<g.length;r++)if(0===r){let i=f(t.substring(2,6));g[r]=W(i)}else{let i=f(t.substring(4+2*r,6+2*r));g[r]=F(i,B*o)}let w=4*e,_=new Uint8ClampedArray(w*a);for(let r=0;r<a;r++)for(let i=0;i<e;i++){let I=0,L=0,R=0;for(let U=0;U<C;U++)for(let b=0;b<P;b++){let A=Math.cos(Math.PI*i*b/e)*Math.cos(Math.PI*r*U/a),T=g[b+U*P];I+=T[0]*A,L+=T[1]*A,R+=T[2]*A}let S=p(I),N=p(L),k=p(R);_[4*i+0+r*w]=S,_[4*i+1+r*w]=N,_[4*i+2+r*w]=k,_[4*i+3+r*w]=255}return _},O=c(1777),D=(()=>((D||(D={})).VISIBLE="visible",D))();const Z=(0,O.X$)("fadeIn",[(0,O.SB)(D.VISIBLE,(0,O.oB)({opacity:1})),(0,O.eR)("* => visible",[(0,O.jt)("500ms ease-out")])]);var m=c(5e3),$=c(9808);const Q=["canvas"],Y=["img"];function X(t,e){if(1&t&&m._UZ(0,"canvas",3,4),2&t){const a=m.oxw();m.Q6J("width",a.width)("height",a.height)}}let z=(()=>{class t{constructor(a){this.changeDetectorRef=a,this.resolve=!1}ngAfterViewInit(){this.createImgInstance(),this.drawCanvas()}createImgInstance(){const a=new Image;a.src=this.URL,a.onload=()=>this.onLoadImg()}onLoadImg(){[this.resolve,this.animationState]=[!0,D.VISIBLE],this.changeDetectorRef.detectChanges(),this.img.nativeElement.src=this.URL}drawCanvas(){const a=K(this.hash,this.width,this.height),o=this.canvas.nativeElement.getContext("2d"),h=o.createImageData(this.width,this.height);h.data.set(a),o.putImageData(h,0,0)}}return t.\u0275fac=function(a){return new(a||t)(m.Y36(m.sBO))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-blurhash"]],viewQuery:function(a,o){if(1&a&&(m.Gf(Q,5),m.Gf(Y,5)),2&a){let h;m.iGM(h=m.CRH())&&(o.canvas=h.first),m.iGM(h=m.CRH())&&(o.img=h.first)}},inputs:{hash:"hash",URL:"URL",width:"width",height:"height"},decls:3,vars:5,consts:[[3,"width","height",4,"ngIf"],[3,"hidden","width","height"],["img",""],[3,"width","height"],["canvas",""]],template:function(a,o){1&a&&(m.YNc(0,X,2,2,"canvas",0),m._UZ(1,"img",1,2)),2&a&&(m.Q6J("ngIf",!o.resolve),m.xp6(1),m.Q6J("hidden",!o.resolve)("@fadeIn",o.animationState)("width",o.width)("height",o.height))},directives:[$.O5],styles:["img[_ngcontent-%COMP%]{opacity:0}img[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%]{width:100%;height:auto}"],data:{animation:[Z]}}),t})()},2221:(x,E,c)=>{c.d(E,{K:()=>s});var d=c(9808),f=c(5e3);let v=(()=>{class n{}return n.\u0275fac=function(M){return new(M||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[d.ez]]}),n})();var u=c(7348),p=c(4100);let s=(()=>{class n{}return n.\u0275fac=function(M){return new(M||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[d.ez,v,u.q,p.Bz]]}),n})()},4879:(x,E,c)=>{c.d(E,{T:()=>v});var d=c(5e3),f=c(2232);let v=(()=>{class u{constructor(s){this.unsplashService=s}getWidth(s){return"s"==s?400:"r"==s?1080:0}calHeight(s,n,l){const M=n/this.getWidth(s);return Math.round(l/M)}getDimensions(s,n,l){return`${this.getWidth(s)} X ${this.calHeight(s,n,l)}`}downloadPhoto(s,n){this.unsplashService.trackDownload(s),fetch(n).then(l=>l.blob()).then(l=>{const M=window.URL.createObjectURL(l),y=document.createElement("a");y.style.display="none",y.href=M,y.download="",document.body.appendChild(y),y.click(),window.URL.revokeObjectURL(M)}).catch(()=>alert("Sorry, an error occurred trying to download"))}}return u.\u0275fac=function(s){return new(s||u)(d.LFG(f.o))},u.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);